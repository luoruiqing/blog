---
title:        "Mysql 常用操作"
subtitle:     ""
layout:       post
author:       "luoruiqing"
header-style: text
catalog:      true
tags:
    - Mysql
---


## 复制表

#### 复制表结构

```sql
CREATE TABLE 新表 LIKE 旧表
CREATE TABLE 新表 SELECT * FROM 旧表 WHERE 1=2
SELECT * INTO 新表 FROM 旧表 WHERE 1=2
```

#### 复制全部数据

```sql
INSERT INTO 新表 SELECT * FROM 旧表;
```

#### 复制部分数据

```sql
INSERT INTO 新表 SELECT * FROM 旧表 WHERE 条件;
INSERT INTO 新表(字段1,字段2,.......) SELECT 字段1,字段2,...... FROM 旧表
```

#### 复制表结构及数据

```sql
CREATE TABLE 新表 SELECT * FROM 旧表
```
> ! 这种方式复制的表可能没有`主键`

```sql
SELECT * INTO 新表 FROM 旧表
```

#### 复制表结构及数据(完美方式)

```sql
CREATE TABLE 新表 LIKE 旧表; 
INSERT INTO 新表 SELECT * FROM 旧表;
```

#### 获取建表语句

```sql
SHOW CREATE TABLE 旧表;
```

#### 工具

- mysqldump

#### 跨库

```sql
-- 全复制
INSERT INTO DB1.TABLE1 SELECT * FROM DB2.TABLE2; 
-- 去重复制
INSERT INTO DB1.TABLE1 SELECT DISTINCT * FROM DB2.TABLE2;
-- 条数复制
INSERT INTO TDB1.ABLE1 SELECT TOP 条数 * FROM DB2.TABLE2;
```